<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core" xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd">
	<sub-flow name="orchestrator-update-status-order-main" doc:id="469af959-a488-4b68-af5b-6d24fc02a4ca" >
		<flow-ref doc:name="Call to client-wms-blueyonder-login" doc:id="3388bcc5-0ade-4b59-9823-a5b939bf3264" name="client-wms-blueyonder-login" target="loginResponse"/>
		<flow-ref doc:name="orchestrator-update-status-order-prepare-payload-params" doc:id="c5183ef8-3242-469e-af51-4faf3a796eea" name="orchestrator-update-status-order-prepare-payload-params" />
		<flow-ref doc:name="Call to client-wms-blueyonder-service-log-order-api" doc:id="96cf3850-5527-45f3-9190-d6c4e1b52188" name="client-wms-blueyonder-service-log-order-api"/>
	</sub-flow>
	<sub-flow name="orchestrator-update-status-order-prepare-payload-params" doc:id="25cfc1e2-afcf-49d5-b696-713e7af4bfe2" >
		<ee:transform doc:name="Set payload" doc:id="64106dfe-24fa-4c52-a884-54357bbac64c" >
			<ee:message >
				<ee:set-payload ><![CDATA[%dw 2.0
output application/xml  encoding= "UTF-8"
import * from dw::core::Strings
---
{
	UC_IMSS_LOG: {
            CTRL_SEG: {
            TRNNAM: "UC_LOG",
            TRNVER: "8.3",
            WHSE_ID: "ORDINARIO",
            LOG_SEG: {
                STATUS_CONECTION: payload.status_conection,
                REASON_CONECTION: payload.reason_conection,
                ORDNUM: payload.remission_number,
                GENERIC1: payload.reposition_number,
                GENERIC2: payload.order_number default "",
                GENERIC3: payload.status default "",
                GENERIC4: "",
                GENERIC5: "",
                DATE_EVENT: payload.date_transaction,
                STATUS_TRANSACTION: payload.status_transaction default 0,
                MESSAGE_TRANSACTION: payload.message_transaction,
                REQUEST: payload.request,
                RESPONSE: payload.response,
                WH_ID: "ORDINARIO",
                CLIENT_ID: "----",
                EVENT: "INV-RCV",
                EVENT_DATA_SEQUENCE: "",
                SYSTEM: payload.system
            }
        }
	}
}]]></ee:set-payload>
			</ee:message>
		</ee:transform>
		<logger level="INFO" doc:name="Logger" doc:id="73f32f0b-89a5-44f0-969a-e9903e69df62" message="#[payload]"/>
	</sub-flow>
</mule>
