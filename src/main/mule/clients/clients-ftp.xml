<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ftp="http://www.mulesoft.org/schema/mule/ftp" xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/ftp http://www.mulesoft.org/schema/mule/ftp/current/mule-ftp.xsd">
	<sub-flow name="clients-ftp-obtain-files-effem" doc:id="5a53d1f8-4925-4e85-8c58-ae5353f9de76" >
		<ftp:list doc:name="List files" doc:id="25ec5eb4-7c73-439d-bd31-aef8d608f445" config-ref="FTP_Config_effem" directoryPath="${sftp.directory.path}" recursive="true" >
			<ftp:matcher timeUnit="MILLISECONDS" filenamePattern="${sftp.matcher.file.name.pattern}" />
		</ftp:list>
	</sub-flow>
	<sub-flow name="clients-ftp-write-file" doc:id="f9ef56a7-aa79-445c-8d0f-ff1fc3f51762" >
		<logger level="INFO" doc:name="Logger" doc:id="95b657cd-8338-4136-a8ae-6ae0b5921a84" message="#[%dw 2.0
output application/json
---
payload]"/>
		<logger level="INFO" doc:name="Logger" doc:id="5308d6c8-57fd-4743-9ea5-86925a5fdcad" message="#[%dw 2.0
output application/json
---
p('sftp.move.to.directory') ++ vars.doc_name]"/>
		<ftp:write doc:name="Write" doc:id="0f9650be-9283-4568-a7e7-89774ba78b50" config-ref="FTP_Config_effem" path="#[p('sftp.move.to.directory') ++ vars.doc_name]" createParentDirectories="false"/>
		<logger level="INFO" doc:name="FINISH" doc:id="8fae3d94-b932-4479-80c4-4d62986eaa50" message="FINISH WRITE"/>
	</sub-flow>
	
</mule>
